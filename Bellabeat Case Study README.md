---
title: "Bellabeat Case Study"
author: "Peter Masternak"
date: "17/01/2022"
output:
  html_document: default
  word_document: default
  pdf_document: default
---  


![s](https://cdn.muscleandstrength.com/sites/default/files/3_day_toning_workout_-_1200x630.jpg)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

# **ASK**

--------------------------------------------------------------------------------  

### INTRO  
You are working with the marketing analyst team at Bellabeat, a high-tech manufacturer of health-focused products for women. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, co-founder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. You have been asked to focus on one of Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. The insights you discover will then help guide marketing strategy for the company. You will present your analysis to the Bellabeat executive team along with your high-level recommendations for Bellabeat’s marketing strategy.  

### BUSINESS TASK  
**Find out how customers are using their fitness smart devices by identifying trends and providing the executive team with high-level recommendations.**

--------------------------------------------------------------------------------  
--------------------------------------------------------------------------------  

# **PREPARE**  

--------------------------------------------------------------------------------  

### ABOUT THE DATA  
The dataset was obtained from Kaggle which includes open source Fitbit fitness tracker data available to use for analysis. This dataset was generated by respondents to a distributed survey via Amazon Mechanical Turk between 03-12-2016 and 05-12-2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. Individual reports can be parsed by export session ID (column A) or timestamp (column B). Variation between output represents use of different types of Fitbit trackers and individual tracking behaviors / preferences.  

This dataset is organized into 18 CSV files. Most of the data are duplicates and the most relative data can be found in the daily activity and sleep data. We will be focusing on the daily time frame since we are looking for high-level trends.  This data can help us uncover key trends and gain insight on how our users like to use their smart fitness devices.  

Data License Agreement and datasets used can be found [here](https://www.kaggle.com/arashnic/fitbit/metadata).  

Metadata file containing info about the data types and data description can be found [here](https://www.fitabase.com/media/1930/fitabasedatadictionary102320.pdf).  


### DATA LIMITATIONS  
* Data-privacy issues prohibit us from having access to data from customers who did not consent to the submission of personal tracker data. This limits the total available data for analysis and the data collected is considered a small sample of the overall smart fitness device users. The small sample size of participants may not reveal the big picture.  
  
* It’s unclear for how long each participant had their devices in use. Charging the device would result in unrecorded data; This may have taken place during low activity hours or during sleep, but this is not certain.  
* Gender is unknown in the survey. Bellabeat focuses exclusively on women’s health and this data came from Fitbit which has both men and women users. Gender information here is important to provide additional insights during the analysis and recommendations.  
* Age and fitness level are unknown in the survey. This limits us to understand what level of fitness each participant is in and set a benchmark according to age.  
* There is no data to cover an entire year which would’ve given a better understanding of how individuals use their fitness devices throughout each season of the year.  
* Data was collected in 2016 which is not current.  

--------------------------------------------------------------------------------  
--------------------------------------------------------------------------------  

# **PROCESS**

--------------------------------------------------------------------------------  

### TOOLS USED  
We will be using **RStudio** to prepare, clean, analyze and visualize the data.  
  
### SETTING UP THE ENVIRONMENT  
Installing and loading packages that we will be using:  
```{r Installing and Loading Packages, message=FALSE}
install.packages("tidyverse", lib = "/cloud/project")
library(tidyverse)
install.packages("skimr", lib = "/cloud/project")
library(skimr)
install.packages("janitor", lib = "/cloud/project")
library(janitor)
install.packages("lubridate", lib = "/cloud/project")
library(lubridate)
install.packages("ggplot2", lib = "/cloud/project")
library(ggplot2)
```
  
Import CSV files:
```{r Import CSV}
Activity <- read.csv("dailyActivity_merged.csv")
Sleep <- read.csv("sleepDay_merged.csv")
Weight <- read.csv("weightLogInfo_merged.csv")
Intensities <- read.csv("hourlyIntensities_merged.csv")
```
  
Check column headers and data structure:
```{r Check, message=FALSE}
# Activity
str(Activity)
# Sleep
str(Sleep)
# Weight
str(Weight)
# Intensities
str(Intensities)
```  
  
### CLEANING THE DATA  
  
#### Rename Columns
Renaming column headers for consistent and easier readability:
```{r Rename Columns, results="hide"}
# Activity
Activity <- Activity %>% 
  rename(
    ID = Id,
    Date = ActivityDate,
    Total_Steps = TotalSteps,
    Total_Distance_km = TotalDistance,
    Tracker_Distance_km = TrackerDistance,
    Logged_Activites_Distance_km = LoggedActivitiesDistance,
    Very_Active_Distance_km = VeryActiveDistance,
    Moderate_Active_Distance_km = ModeratelyActiveDistance,
    Light_Active_Distance_km = LightActiveDistance,
    Sedentary_Active_Distance_km = SedentaryActiveDistance,
    Very_Active_min = VeryActiveMinutes,
    Fairly_Active_min = FairlyActiveMinutes,
    Lightly_Active_min = LightlyActiveMinutes,
    Sedentary_min = SedentaryMinutes
  )
str(Activity)
# Sleep
Sleep <- Sleep %>% 
  rename(
    ID = Id,
    Date = SleepDay,
    Total_Sleep_Records = TotalSleepRecords,
    Total_Min_Asleep = TotalMinutesAsleep,
    Total_Min_In_Bed = TotalTimeInBed
  )
str(Sleep)
# Weight
Weight <- Weight %>% 
  rename(
    ID = Id,
    Weight_kg = WeightKg,
    Weight_lbs = WeightPounds,
    Is_Manual_Report = IsManualReport,
    Log_ID = LogId
  )
str(Weight)
# Intensities
Intensities <- Intensities %>% 
  rename(
    ID = Id,
    Hour = ActivityHour,
    Total_Intensity = TotalIntensity,
    Avg_Intensity = AverageIntensity
  )
str(Intensities)
```
  
--------------------------------------------------------------------------------  

#### Data Type
All Date columns don't have correct data type --- Converting to date time format:
```{r Date Time, results="hide"}
# Activity
Activity$Date=as.POSIXct(Activity$Date, format="%m/%d/%Y", tz=Sys.timezone())
str(Activity)

# Sleep
Sleep$Date=as.POSIXct(Sleep$Date, format="%m/%d/%Y", tz=Sys.timezone())
str(Sleep)

# Weight
Weight$Date=as.POSIXct(Weight$Date, format="%m/%d/%Y", tz=Sys.timezone())
str(Weight)
```
  
For *Intensities*, we need to take steps to get the *average total intensity* for each hour of the day, and isolate the hours from the date    
```{r, results="hide"}
# Separating Date_Hour columns into Date, Hour, and AM/PM columns
Intensities <-separate(Intensities, Hour, into=c('Date', 'Hour', 'AM/PM'), sep=' ')  

## Unite Hour and AM/PM columns together to Hour column
Intensities$Hour <- paste(Intensities$Hour, Intensities$`AM/PM`)  

## Drop Date and AM/PM columns
Intensities <- Intensities[-c(2,4)]  

## Create hourly average for total intensities
Intensities_Hour_Avg <- Intensities %>% 
  group_by(Hour) %>% 
  summarize(Total_Intensity = mean(Total_Intensity))  

## Changing data type to date time for Hour column (also changes time to 24hr format)
Intensities_Hour_Avg$Hour=as.POSIXct(Intensities_Hour_Avg$Hour, format="%I:%M:%S %p", tz=Sys.timezone())  

## Separate date and hour
Intensities_Hour_Avg <-separate(Intensities_Hour_Avg, Hour, into=c('Date', 'Hour'), sep=' ')  

## Drop Date column
Intensities_Hour_Avg <- Intensities_Hour_Avg[-c(1)]  

## Sorting hours in order
Intensities_Hour_Avg <- Intensities_Hour_Avg %>% 
  arrange(Hour)  
```

```{r}
## Check
str(Intensities_Hour_Avg)  
```  
  
--------------------------------------------------------------------------------  

#### NULL and NA Values
Check data frames for NULL and NA values  
```{r NULL and NA, results="hide"}
# Activity
sum(is.null(Activity)) # 0 NULL
sum(is.na(Activity)) # 0 NA

# Sleep
sum(is.null(Sleep)) # 0 NULL
sum(is.na(Sleep)) # 0 NA

# Weight
sum(is.null(Weight)) # 0 NULL
sum(is.na(Weight)) # 65 NA

# Intensities
sum(is.null(Intensities)) # 0 NULL
sum(is.na(Intensities)) # 0 NA
```  
  
```{r, message=FALSE}
# Install and load "mice" package to help identify which columns the NA values are in
install.packages("mice")
library(mice)

# Create viz to show where the missing data is
md.pattern(Weight, plot = TRUE, rotate.names = TRUE) 
```
All 65 NA values are in the *Fat* column (65 out of 67 data points in the column). Since all of the NA values are in the *Fat* column, and make up 65 out of the 67 data points in that column, a proper analysis cannot be done with this column:
```{r, results="hide"}
# Create new data frame without the "Fat" column
Weight <- data.frame(Weight %>% select(-Fat))
str(Weight)
```
  
--------------------------------------------------------------------------------  

#### Unique IDs
Identifying number of unique values in ID column in each data frame to confirm number of participants:
```{r Unique IDs, results="hide"}
# Activity
length(unique(Activity$ID))# 33 IDs
# Sleep
length(unique(Sleep$ID)) # 24 IDs
# Weight
length(unique(Weight$ID)) # 8 IDs
# Intensities
length(unique(Intensities$ID)) # 33 IDs
```  
A total of 33 unique IDs were identified; Activity:  33, Sleep: 24, Weight: 8, Intensities: 33; There are 3 more unique IDs than stated on the data description; Sleep makes up 73% (24/33) of the overall unique IDs and may still be relevant for useful analysis; Weight makes up 24% (8/33) of the overall unique IDs and is insignificant for useful analysis  

--------------------------------------------------------------------------------  

#### Duplicates
```{r Duplicates, results="hide"}
# Activity
sum(duplicated(Activity)) # 0 duplicates
# Sleep
sum(duplicated(Sleep)) # 3 duplicates
# Intensities
sum(duplicated(Intensities)) # 12, 351 duplicates
```
It makes sense for so many duplicates for Intensities since it's organized by hours and total intensity can be the same during hours of sleep which can produce duplicates:
```{r, results="hide"}
## The Sleep column should not have duplicates since ID x Date should be unique; Removing duplicates
Sleep <- distinct(Sleep)

# Check
str(Sleep)
```
  
--------------------------------------------------------------------------------  

#### Merging Data Frames
We will merge data frames for easier analysis:
```{r, Merge Date}
## Joining the Activity and Sleep data frames with the ID and Date columns for analysis
Daily_Data_Merged <- merge(Activity, Sleep, by=c('ID', 'Date'))
```   
  
--------------------------------------------------------------------------------  

#### Adding Column
Adding Total Activity Minutes column in Daily_Data_Merged data frame for analysis:
```{r, results="hide"}
# Adding up Very_Active_min, Fairly_Active_min, and Lightly_Active_min into a new column
Daily_Data_Merged$Total_Activity_Min <- Daily_Data_Merged$Very_Active_min +
  Daily_Data_Merged$Fairly_Active_min +
  Daily_Data_Merged$Lightly_Active_min

# Check
str(Daily_Data_Merged)
```  
  
--------------------------------------------------------------------------------  
  
#### Summary
Looking at summery stats on data:
```{r}
summary(Daily_Data_Merged)
```  
Data description says the data set represents data between March 12, 206 to May 12, 2016, however, it only has data from April 12, 206 to May 12, 2016, which is one month less (or 50% of the data) than stated.  
  
--------------------------------------------------------------------------------  
  
### PROBLEMS WITH THE DATA  
* Data description says there are 30 participants but the datasets have 33 unique IDs.  
  
* Data description says the dataset represents data between 03/12/206 to 05/12/2016, however, it only has data from 04/12/2016 to 05/12/2016, which is one month less (or 50% of the data) than stated.  
* Sleep Value is not clear. We have 1, 2, and 3 for values.  
* Units of measurement for distance are unclear if km or miles was used.  
* Date time columns do not have correct data type.  
* Weight dataset has 65 NA values which were all in the “Fat” column (65 out of 67 of the data points were NA).  


### SOLUTION TO THE PROBLEMS
* Used all 33 user IDs as this gave us 3 extra unique IDs to work with.  
  
* We will use the one month of data for analysis, but this is not an adequate amount of data and should be considered.  
* Since there is no way of knowing for sure what the Sleep Values are we won’t be using it for the analysis.  
* Unit of measurement for distance was determined by using an online calculator to convert steps to miles and km to determine the best possible match with the data. Variables such as gender and height are factors to determine accurate conversion. For this case we used an average person’s height to get a ballpark. Based on this metric we’ve identified that km was used in this data.  
* Converted all date time columns to appropriate date time format.  
* Since all of the NA values are in the “Fat” column, and make up 65 out of the 67 data points in that column, a proper analysis cannot be done. Knowing this a new data frame was created without the “Fat” column called “Weight_Clean”.  

--------------------------------------------------------------------------------  
--------------------------------------------------------------------------------  

# **ANALYZE**

--------------------------------------------------------------------------------  

Looking at the summary of our data in bits that make sense for quick analysis 

### STATS
```{r}
## Looking at minutes of all activity levels and sleep
Daily_Data_Merged %>% 
  select(Very_Active_min,
         Fairly_Active_min,
         Lightly_Active_min,
         Sedentary_min,
         Total_Min_Asleep,
         Total_Min_In_Bed) %>% 
  summary()
```
* A minimum sedentary time of zero minutes may suggest one or more users used the device only for active activities at least once
* Looking at the maximum difference in time between being asleep and being in bed is a 2.75 hour difference, which can suggest poor sleep practices or illness
* The minimum amount of less than an hour may suggest that a user could have charged the device during sleep but took a nap during the day
* As the level of activity increases the average minutes decreases, which makes sense since it's not expected for someone to be at a Very Active state for majority of the day, however, we do see slight more minute in Very Active compared to Fairly Active with an average difference of 7 minutes.
* On average, people were in bed awake for 39 minutes
* The combination of average minutes between sedentary (712 min, or 11.8 hour) and time in bed (458 minutes, or 7.6 hours) make up 19.5 hours, which may suggest users have desk jobs  

--------------------------------------------------------------------------------  
  
```{r}
## Looking at distance between all levels of activity and calories
Daily_Data_Merged %>% 
  select(Total_Steps,
         Total_Distance_km,
         Very_Active_Distance_km,
         Moderate_Active_Distance_km,
         Light_Active_Distance_km,
         Sedentary_Active_Distance_km,
         Calories) %>% 
  summary()
```
* Makes sense for super low (practically zero) for sedentary distance since it's stationary
* Very active distance maximum of 12.5km may suggest at least one user has relatively good fitness levels, however, this may be a one off since the average is much lower at 1.45km
* Most of the distance is made via lightly active activities at 3.8km, which can be credited to every day walking
* Decent average amount of calories burnt in a day could suggest that fitness is primarily not distance related, but a stationary workout instead  

--------------------------------------------------------------------------------  
  
### VISUALIZATIONS  
```{r, message=FALSE}
## Steps vs Calories
ggplot(data = Activity) + 
  geom_smooth(mapping = aes(x=Total_Steps, y=Calories)) +
  geom_point(mapping = aes(x=Total_Steps, y=Calories)) +
  labs(title="Daily Steps vs Daily Calories", x= "Steps", y= "Calories")
```  

* There is a positive correlation between, which makes sense when you walk you burn calories.
* There are records of 0 steps with calories as high as almost 3,000, which can suggest that some users only used the device for stationary workouts  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Total Activity Time vs. Calories
ggplot(data = Daily_Data_Merged) + 
  geom_smooth(mapping = aes(x = Total_Activity_Min, y = Calories)) +
  geom_point(mapping = aes(x = Total_Activity_Min, y = Calories)) +
  labs(title="Acivity Time vs Calories", x= "Activity Minutes", y= "Calories")
```  

* There is a positive correlation, which makes sense because you burn more calories the longer an activity is  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Sleep vs Time In Bed
ggplot(data=Daily_Data_Merged) + 
  geom_smooth(mapping=aes(x=Total_Min_Asleep, y=Total_Min_In_Bed)) +
  geom_point(mapping=aes(x=Total_Min_Asleep, y=Total_Min_In_Bed)) +
  labs(title="Time Slept vs Time in Bed", x= "Minutes Asleep", y= "Minutes In Bed")
```  

* There is positive correlation which makes sense since you will spend more time in bed awake than asleep  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Sleep vs. Total Activity Time
ggplot(data=Daily_Data_Merged) + 
  geom_smooth(mapping=aes(x=Total_Min_Asleep, y=Total_Activity_Min)) +
  geom_point(mapping=aes(x=Total_Min_Asleep, y=Total_Activity_Min)) +
  labs(title="Time Slept vs Acivity Time", x= "Minutes Asleep", y= "Minutes of Activity")
```  

* There is no clear correlation here, however, it does look like those who do sleep more than 600 minutes (10 hrs) have lower activity time, which may be due to the less time in the day for activities
* It does look like when people get between 400 (6.7 hrs) and 600 (10 hrs) of sleep have higher activity minutes  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Sleep vs. Calories
ggplot(data=Daily_Data_Merged) + 
  geom_smooth(mapping=aes(x=Total_Min_Asleep, y=Calories)) +
  geom_point(mapping=aes(x=Total_Min_Asleep, y=Calories)) +
  labs(title="Time Slept vs Daily Calories", x= "Minutes Asleep", y= "Calories")
```  

* There's no correlation here, but there is something interesting here
* There are records of sleep under 100 minutes that have over 2000 calories burned, which can suggest that some users only used the device for stationary workouts and don't use it for sleep  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Sleep vs. Steps
ggplot(data=Daily_Data_Merged) + 
  geom_jitter(mapping=aes(x=Total_Min_Asleep, y=Total_Steps)) +
  geom_smooth(mapping = aes(x = Total_Min_Asleep, y = Total_Steps)) +
  labs(title="Daily Step Count vs Time Slept", x= "Minutes Asleep", y= "Step Count")
```  

* There are records of sleep over 600 minutes(10hrs) with decreasing step count, which can make sense because there's less time in the day on the feet  

--------------------------------------------------------------------------------  
  
```{r, message=FALSE}
## Hour vs Avg Total Intensity
ggplot(data=Intensities_Hour_Avg, aes(x=Hour, y=Total_Intensity)) + 
  geom_col(stat = "identity", fill='blue1') +
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title="Hour vs. Average Total Intensity", x="Hour", y="Avg Total Intensity")
```  

* We can see that the highest average total intensity occurs between 5pm and 7pm, and the lowest occurs between 11pm and 5am, which makes sense in terms of when most people sleep and work  

--------------------------------------------------------------------------------  
--------------------------------------------------------------------------------  
  
# **SHARE**  

--------------------------------------------------------------------------------  
  
### FINDINGS  
* The more steps taken means more calories burned.  
  
* The longer the activity time means more calories burned.
* Since there are multiple records of people burning calories with zero steps and zero minutes of sleep, it can suggest that some people may only use their fitness devices only to track stationary workouts. This can mean that some people don’t wear the watch throughout the day and/or during sleep.
* Those who get between 400 minutes (6.7 hrs) and 600 minutes (10 hrs) of sleep have higher activity minutes throughout the day overall, but between those same times we also have lower activity minutes overall. The lower activity minutes can be due to “rest days” or "busy schedules".
* We found that those who sleep over 600 minutes (10 hrs) typically have the least amount of steps, which is under 5000. This can be because there’s less time in the day on their feet.
* We can see that the highest average total intensity occurs between 5pm and 7pm, and the lowest occurs between 11pm and 5am, which makes sense in terms of when most people sleep and work  

--------------------------------------------------------------------------------  
  
### RECOMMENDATIONS  

We want to know how customers are using their fitness smart devices by identifying trends and providing high-level recommendations. Based on our analysis and findings, here are our top recommendations:  


#### 1) Evolving/Involving the Community:  
Bellabeat is a community of women set on living a healthy lifestyle. We can engage with the community to offer a sense of belonging and motivation.We can evolve the community by involving everyone. Creating scheduled workout times throughout the day where users can workout at the same time as other users and at the end of the scheduled workout (after an hour for instance) we can share to everyone who participated the overall community stats during that workout session. This can make users feel accountable to their workouts and want to contribute to their community where their participation motivates others while also getting motivation from the community. It's not a surprise to see that the most activity time occurs between 5pm and 7pm, which is normally after work hours. We can take advantage of this by inviting users to participate during this time on the device.  
  
  
#### 2) Sending Sleep Reminders: 
Sleep is important and having the right amount is critical. We can have users input their sleep schedule and let them know if it's too little or too much sleep based on their input. We can remind users in steps to get them settled down for bed; For example, one hour before scheduled bedtime we can remind users to put down electronic devices, and another reminder 15 minutes before bedtime.  
  
  
#### 3) Comparing Data:  
We're our own best competition. Giving weekly recaps and comparing it to how users performed the week prior across all metrics can show progress and promote consistency. Additionally, we can have a sense of community for women using Bellabeat devices and provide users regular updates (either daily, weekly, monthly, or yearly) where it shows how they did compared to the overall community during the selected duration.  
  
  
--------------------------------------------------------------------------------  
  
#### Things to Consider:  
There were some limitations discovered along the way with the dataset that must be considered when analyzing this data. Please look at the Data Limitation section for more information.  

--------------------------------------------------------------------------------  

# THANK YOU 










